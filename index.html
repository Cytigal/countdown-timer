<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Countdown Timer</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700;900&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            /* CSS Variable for dynamic font size. Default is 25vw. */
            --timer-font-size: clamp(4rem, 25vw, 20rem);
            --times-up-font-size: clamp(3rem, 18vw, 15rem); /* Slightly smaller for better fit */
        }
        body {
            font-family: 'Roboto Mono', monospace;
            background-color: #000;
            color: #fff;
            text-shadow: 0 0 10px rgba(220, 235, 255, 0.7);
            overflow: hidden; /* Prevent scrollbars from appearing */
            transition: background-color 0.5s ease;
        }
        /* New class for the BRIGHTER red background when time is up */
        body.time-up-bg {
            background-color: #dc2626; /* A bright, intense red (Tailwind red-600) */
        }
        .timer-container {
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: var(--timer-font-size);
            font-weight: 700;
            transition: font-size 0.2s ease-in-out;
        }
        /* New style for the giant "TIME'S UP" message */
        #times-up-message {
            font-size: var(--times-up-font-size);
            font-weight: 900; /* Black weight for maximum impact */
            color: #fff;
            text-shadow: 0 0 10px rgba(0,0,0,0.5); /* Shadow for depth on red bg */
            text-align: center;
            line-height: 1.2;
        }
        .time-segment {
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            padding: 0 1rem;
            color: #ffffff; 
        }
        .time-segment.active {
            color: #38bdf8;
            text-shadow: 0 0 5px #fff, 0 0 15px #38bdf8, 0 0 25px #38bdf8;
        }
        .instructions {
            font-size: 1.25rem;
            color: #d1d5db; /* Lighter gray for better contrast on red */
            text-shadow: none;
            letter-spacing: 0.05em;
            transition: opacity 0.3s ease-in-out;
        }
        .colon {
            animation: blink 1.5s infinite;
            color: #6b7280;
        }
        @keyframes blink {
            50% { opacity: 0.5; }
        }
        .zoom-btn {
            background-color: rgba(55, 65, 81, 0.5);
            color: #d1d5db;
            border: 1px solid #4b5563;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            font-size: 2rem;
            line-height: 1;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background-color 0.2s, transform 0.1s;
        }
        .zoom-btn:hover {
            background-color: #4b5563;
        }
        .zoom-btn:active {
            transform: scale(0.95);
        }
    </style>
</head>
<body class="flex flex-col items-center justify-center min-h-screen p-4">

    <div id="zoom-controls" class="absolute top-4 right-4 flex items-center space-x-3 z-10">
        <button id="zoom-out" class="zoom-btn" title="Decrease font size (-)">-</button>
        <button id="zoom-in" class="zoom-btn" title="Increase font size (+)">+</button>
    </div>

    <div id="instructions-top" class="instructions text-center mb-8">
        Click on numbers or use arrow keys to set time.
    </div>

    <div id="timer-container" class="timer-container">
        <div id="minutes" class="time-segment active">10</div>
        <div class="colon">:</div>
        <div id="seconds" class="time-segment">00</div>
    </div>
    
    <!-- This element will replace the timer when time is up -->
    <div id="times-up-message" class="hidden">
        TIME'S UP
    </div>
    
    <div id="instructions-bottom" class="instructions text-center mt-8">
        Press [SPACE] to start/pause, [DEL] to reset.
    </div>

    <script>
        // --- DOM ELEMENTS ---
        const minutesEl = document.getElementById('minutes');
        const secondsEl = document.getElementById('seconds');
        const instructionsTopEl = document.getElementById('instructions-top');
        const instructionsBottomEl = document.getElementById('instructions-bottom');
        const timerContainer = document.getElementById('timer-container');
        const timesUpMessageEl = document.getElementById('times-up-message');
        const zoomInBtn = document.getElementById('zoom-in');
        const zoomOutBtn = document.getElementById('zoom-out');
        const rootEl = document.documentElement;
        const bodyEl = document.body;

        // --- STATE ---
        let totalSeconds = 0;
        let timerInterval = null;
        let isRunning = false;
        let activeEditor = 'minutes';
        const INITIAL_MINUTES = 10;
        let currentFontSizeVw = 25;
        const FONT_SIZE_STEP = 2;
        const MIN_FONT_SIZE_VW = 10;
        const MAX_FONT_SIZE_VW = 40;

        // --- FUNCTIONS ---
        function updateFontSize() {
            const newTimerSize = `clamp(4rem, ${currentFontSizeVw}vw, 20rem)`;
            const newTimesUpSize = `clamp(3rem, ${currentFontSizeVw * 0.7}vw, 15rem)`; // Keep it proportional
            rootEl.style.setProperty('--timer-font-size', newTimerSize);
            rootEl.style.setProperty('--times-up-font-size', newTimesUpSize);
        }

        function updateDisplay() {
            const mins = Math.floor(totalSeconds / 60);
            const secs = totalSeconds % 60;
            minutesEl.textContent = String(mins).padStart(2, '0');
            secondsEl.textContent = String(secs).padStart(2, '0');
        }

        function updateActiveEditorVisuals() {
            if (activeEditor === 'minutes') {
                minutesEl.classList.add('active');
                secondsEl.classList.remove('active');
            } else {
                secondsEl.classList.add('active');
                minutesEl.classList.remove('active');
            }
        }
        
        function updateInstructions(state) {
            instructionsTopEl.classList.remove('hidden');
            instructionsBottomEl.classList.remove('hidden');

            switch(state) {
                case 'RUNNING':
                    instructionsTopEl.classList.add('hidden');
                    instructionsBottomEl.classList.add('hidden');
                    break;
                case 'PAUSED':
                    instructionsTopEl.textContent = "Click on numbers or use arrow keys to set time.";
                    instructionsBottomEl.textContent = "Press [SPACE] to resume, [DEL] to reset.";
                    break;
                case 'FINISHED':
                    instructionsTopEl.classList.add('hidden');
                    instructionsBottomEl.textContent = "Press [DEL] to restart.";
                    break;
                case 'IDLE':
                default:
                    instructionsTopEl.textContent = "Click on numbers or use arrow keys to set time.";
                    instructionsBottomEl.textContent = "Press [SPACE] to start/pause, [DEL] to reset.";
                    break;
            }
        }

        function startTimer() {
            if (totalSeconds <= 0) return;

            isRunning = true;
            bodyEl.classList.remove('time-up-bg');
            timerContainer.classList.remove('hidden');
            timesUpMessageEl.classList.add('hidden');
            updateInstructions('RUNNING');
            minutesEl.classList.remove('active');
            secondsEl.classList.remove('active');

            timerInterval = setInterval(() => {
                totalSeconds--;
                updateDisplay();
                if (totalSeconds <= 0) {
                    stopTimer(true);
                }
            }, 1000);
        }

        function stopTimer(finished = false) {
            clearInterval(timerInterval);
            isRunning = false;
            
            if (finished) {
                timerContainer.classList.add('hidden');
                timesUpMessageEl.classList.remove('hidden');
                bodyEl.classList.add('time-up-bg');
                updateInstructions('FINISHED');
            } else {
                updateInstructions('PAUSED');
                updateActiveEditorVisuals();
            }
        }

        function resetTimer() {
            stopTimer();
            bodyEl.classList.remove('time-up-bg');
            timerContainer.classList.remove('hidden');
            timesUpMessageEl.classList.add('hidden');
            totalSeconds = INITIAL_MINUTES * 60;
            updateDisplay();
            updateInstructions('IDLE');
            updateActiveEditorVisuals();
        }

        function handleKeyDown(e) {
            if (e.key === '=' || e.key === '+') {
                currentFontSizeVw = Math.min(MAX_FONT_SIZE_VW, currentFontSizeVw + FONT_SIZE_STEP);
                updateFontSize();
            } else if (e.key === '-') {
                currentFontSizeVw = Math.max(MIN_FONT_SIZE_VW, currentFontSizeVw - FONT_SIZE_STEP);
                updateFontSize();
            }

            if (e.code === 'Space') {
                e.preventDefault();
                if (isRunning) stopTimer(); else startTimer();
            } else if (e.code === 'Delete') {
                resetTimer();
            }

            if (!isRunning) {
                let change = 0;
                if (e.code === 'ArrowUp') change = 1;
                else if (e.code === 'ArrowDown') change = -1;

                if (change !== 0) {
                    e.preventDefault();
                    let mins = Math.floor(totalSeconds / 60);
                    let secs = totalSeconds % 60;

                    if (activeEditor === 'minutes') {
                        mins = (mins + change + 100) % 100;
                    } else {
                        secs = (secs + change + 60) % 60;
                    }
                    totalSeconds = (mins * 60) + secs;
                    updateDisplay();
                }

                if (e.code === 'ArrowLeft' || e.code === 'ArrowRight') {
                    activeEditor = (activeEditor === 'minutes') ? 'seconds' : 'minutes';
                    updateActiveEditorVisuals();
                }
            }
        }

        // --- EVENT LISTENERS ---
        document.addEventListener('keydown', handleKeyDown);
        minutesEl.addEventListener('click', () => { if (!isRunning) { activeEditor = 'minutes'; updateActiveEditorVisuals(); } });
        secondsEl.addEventListener('click', () => { if (!isRunning) { activeEditor = 'seconds'; updateActiveEditorVisuals(); } });
        zoomInBtn.addEventListener('click', () => { currentFontSizeVw = Math.min(MAX_FONT_SIZE_VW, currentFontSizeVw + FONT_SIZE_STEP); updateFontSize(); });
        zoomOutBtn.addEventListener('click', () => { currentFontSizeVw = Math.max(MIN_FONT_SIZE_VW, currentFontSizeVw - FONT_SIZE_STEP); updateFontSize(); });

        // --- INITIALIZATION ---
        function init() {
            totalSeconds = INITIAL_MINUTES * 60;
            updateDisplay();
            updateActiveEditorVisuals();
            updateFontSize();
            updateInstructions('IDLE');
        }

        init();
    </script>
</body>
</html>
